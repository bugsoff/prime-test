# Тестовое задание Prime

## Описание работы

1. При первом запуске база данных не содержит записей, главная страница предлагает перейти на страницу `/init` для загрузки данных
2. На странице `/init` при нажатии кнопки загрузки происходит асинхронный API-запрос с фронтенда на локальный сервер, 
который, в свою очередь, по API авторизуется на сервере MGC, запрашивает данные и после получения сохраняет в локальную базу данных
3. Теперь на главной странице выводится список категорий товаров, который подгружается посредством API-запроса с фронтенда к локальному серверу
Категории, в которых нет товаров - неактивны
4. При нажатии на активную категорию происходит переход на страницу с кратким списком товаров в данной категории. 
Список товаров также загружается API-запросом фронтенда к локальному серверу.
5. При нажатии на кнопку Подробнее - переход на страницу конкретного товара. Информация о товаре аналогично загружается API-запросом в локальному серверу

## Структура файлов

    core                                            логика бэкенда
        \api                                        логика API-интерфейса (controller)
            \api.php                                общий API-контроллер
            \get-categories-list.api.php            получения списка категорий 
            \get-category.api.php                   получения одной категории 
            \get-product-list.api.php               получения списка товаров в данной категорий 
            \get-product.api.php                    получение информации об одном товаре
            \load-data.api.php                      загрузка данных с удалённого сервера MGC
        \mgc                                        логика работы с удалённым сервером
            \load_catalog.php                       контроллер загрузки данных с удалённого сервера
            \mgc.php                                общий контроллер (авторизация и отправка API-запросов) удалённого сервера
        \pub                                        логика публичных страниц (controller)
            \category.php                           страница категории (список товаров в категории)
            \init.php                               страница начальной загрузки и инициализации БД
            \main.php                               главная страница сос писком категорий
            \product.php                            страница информации о продукте
        \core.php                                   общие функции логики (загрузка конфигурации и обработка ошибок)
    data                                            каталог для хранения вспомогательных данных (токена авторизации) 
    db                                              логика работы с локальной базой данных (model)
        \db.php                                     общий класс для работы с БД (установка соединения)
        \get-data.db.php                            чтение локальных данных
        \init.db.php                                инициализация таблиц и запись данных в таблицы
    gui                                             элементы графического интерфейса
        \img                                        изображения
        \pub                                        контент публичных страницы (view)
            \category.gui.php                       страница категории (со списком товаров)
            \init.gui.php                           страница загрузки данных с удалённого сервера
            \main.gui.php                           главная страница со списком категорий
            \product.gui.php                        страница с информацией о продукте
        \scripts                                    JS-скрипты транслированные из TypeScript (см. описание папки /src)
            \api.js
            \category.js
            \gui.js
            \init.js
            \load.js
            \main copy.js
            \main.js
            \product.js
            \types.js
        \styles                                     локальные CSS таблицы
            \styles.css                             дополнительные стили
        \gui.php                                    общие функции графического интерфейса
        \page.gui.php                               структура страницы
    logs                                            папка для записи журналов ошибок
    src                                             исходные коды скриптов фронтенда на TypeScript
        \api.ts                                     api-запросы к локальному серверу
        \category.ts                                загружает список товаров в категории
        \gui.ts                                     строит HTML-элементы страниц 
        \init.ts                                    загружает данные с удалённого сервера
        \load.ts                                    получает данные с локального сервера
        \main.ts                                    загружает список категорий
        \product.ts                                 загружает информацию о продукте
        \types.ts                                   описание типов данных
    .gitignore                                      описание файлов исключенных из репозитория
    config.sample.php                               пример файла конфигурации (данные для доступа исключены)
    index.php                                       точка входа в приложение (главный контроллер)
    prime-test.nginx.conf                           файл конфигурации для веб-сервера Nginx
    readme.md                                       этот файл описания
    tsconfig.json                                   конфигурация транслятора TypeScript
